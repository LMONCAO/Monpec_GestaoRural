{% extends "base_modulos_unificado.html" %}
{% load formatacao_br %}

{% block title %}Nova IATF - {{ propriedade.nome_propriedade }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <nav aria-label="breadcrumb" class="breadcrumb-inteligente mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="{% url 'propriedade_modulos' propriedade.id %}">Módulos</a></li>
            <li class="breadcrumb-item"><a href="{% url 'reproducao_dashboard' propriedade.id %}">Reprodução</a></li>
            <li class="breadcrumb-item active">Nova IATF</li>
        </ol>
    </nav>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1"><i class="bi bi-calendar-plus text-warning me-2"></i>Registro de Nova IATF</h2>
            <p class="text-muted mb-0">{{ propriedade.nome_propriedade }}</p>
        </div>
        <div>
            <a href="{% url 'reproducao_dashboard' propriedade.id %}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left me-1"></i>Voltar
            </a>
        </div>
    </div>

    <form method="post" class="card shadow-sm">
        {% csrf_token %}
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Matriz</label>
                    <select name="animal_individual" class="form-select" required>
                        <option value="" disabled selected>Selecione a matriz</option>
                        {% for animal in animais %}
                            <option value="{{ animal.id }}">{{ animal.numero_brinco }} - {{ animal.categoria.nome }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Estação de Monta</label>
                    <select name="estacao_monta" class="form-select">
                        <option value="">Sem estação vinculada</option>
                        {% for estacao in estacoes %}
                            <option value="{{ estacao.id }}">{{ estacao.nome }} ({{ estacao.data_inicio|date:"d/m" }} - {{ estacao.data_fim|date:"d/m" }})</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Data Programada</label>
                    <input type="date" name="data_programada" class="form-control" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Protocolo</label>
                    <input type="text" name="protocolo" class="form-control" placeholder="Ex: Ovsynch, CIDR" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Raça do Sêmen</label>
                    <input type="text" name="raca_semen" class="form-control" placeholder="Ex: Angus, Nelore">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Número do Touro</label>
                    <input type="text" name="numero_touro" class="form-control" placeholder="Código do sêmen">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Status</label>
                    <select name="status" class="form-select">
                        <option value="PROGRAMADA" selected>Programada</option>
                        <option value="REALIZADA">Realizada</option>
                        <option value="CANCELADA">Cancelada</option>
                        <option value="FALHOU">Falhou</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Observações</label>
                    <textarea name="observacoes" class="form-control" rows="1" placeholder="Informações adicionais"></textarea>
                </div>
            </div>
        </div>
        <div class="card-footer d-flex justify-content-end gap-2">
            <a href="{% url 'reproducao_dashboard' propriedade.id %}" class="btn btn-outline-secondary">Cancelar</a>
            <button type="submit" class="btn btn-warning text-dark">
                <i class="bi bi-save me-1"></i>Registrar IATF
            </button>
        </div>
    </form>
</div>
{% endblock %}





