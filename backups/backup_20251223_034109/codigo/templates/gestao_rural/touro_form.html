{% extends "base_modulos_unificado.html" %}

{% block title %}{% if form_type == "novo" %}Novo Touro{% else %}Editar Touro{% endif %} - {{ propriedade.nome_propriedade }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <nav aria-label="breadcrumb" class="breadcrumb-inteligente mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="{% url 'propriedade_modulos' propriedade.id %}">Módulos</a></li>
            <li class="breadcrumb-item"><a href="{% url 'reproducao_dashboard' propriedade.id %}">Reprodução</a></li>
            <li class="breadcrumb-item"><a href="{% url 'touros_lista' propriedade.id %}">Touros</a></li>
            <li class="breadcrumb-item active">{% if form_type == "novo" %}Novo Touro{% else %}Editar Touro{% endif %}</li>
        </ol>
    </nav>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">
                <i class="bi bi-bull text-success me-2"></i>
                {% if form_type == "novo" %}Cadastro de Touro{% else %}Atualizar Touro{% endif %}
            </h2>
            <p class="text-muted mb-0">{{ propriedade.nome_propriedade }}</p>
        </div>
        <div>
            <a href="{% url 'touros_lista' propriedade.id %}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left me-1"></i>Voltar
            </a>
        </div>
    </div>

    <form method="post" class="card shadow-sm">
        {% csrf_token %}
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Número do Brinco</label>
                    <input type="text" name="numero_brinco" class="form-control" required value="{{ touro.numero_brinco|default_if_none:'' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Nome</label>
                    <input type="text" name="nome" class="form-control" value="{{ touro.nome|default_if_none:'' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Raça</label>
                    <input type="text" name="raca" class="form-control" required value="{{ touro.raca|default_if_none:'' }}">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Data de Nascimento</label>
                    <input type="date" name="data_nascimento" class="form-control" value="{{ touro.data_nascimento|date:'Y-m-d' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Status</label>
                    <select name="status" class="form-select">
                        <option value="APTO" {% if touro.status == "APTO" or not touro.status %}selected{% endif %}>Apto</option>
                        <option value="INAPTO" {% if touro.status == "INAPTO" %}selected{% endif %}>Inapto</option>
                        <option value="EM_TRATAMENTO" {% if touro.status == "EM_TRATAMENTO" %}selected{% endif %}>Em Tratamento</option>
                        <option value="AFASTADO" {% if touro.status == "AFASTADO" %}selected{% endif %}>Afastado</option>
                        <option value="VENDIDO" {% if touro.status == "VENDIDO" %}selected{% endif %}>Vendido</option>
                        <option value="MORTO" {% if touro.status == "MORTO" %}selected{% endif %}>Morto</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Propriedade do Touro</label>
                    <select name="propriedade_touro" class="form-select">
                        <option value="PROPRIO" {% if touro.propriedade_touro == "PROPRIO" or not touro.propriedade_touro %}selected{% endif %}>Próprio</option>
                        <option value="REPRODUTOR" {% if touro.propriedade_touro == "REPRODUTOR" %}selected{% endif %}>Reprodutor Alugado</option>
                        <option value="TERCEIROS" {% if touro.propriedade_touro == "TERCEIROS" %}selected{% endif %}>Terceiros</option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Data do Primeiro Serviço</label>
                    <input type="date" name="data_primeiro_servico" class="form-control" value="{{ touro.data_primeiro_servico|date:'Y-m-d' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Número de Serviços</label>
                    <input type="number" name="numero_servicos" class="form-control" min="0" value="{{ touro.numero_servicos|default_if_none:'' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Número de Prenhezes</label>
                    <input type="number" name="numero_prenhezes" class="form-control" min="0" value="{{ touro.numero_prenhezes|default_if_none:'' }}">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Data da Última Avaliação</label>
                    <input type="date" name="data_ultima_avaliacao" class="form-control" value="{{ touro.data_ultima_avaliacao|date:'Y-m-d' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Resultado Avaliação</label>
                    <input type="text" name="resultado_avaliacao" class="form-control" value="{{ touro.resultado_avaliacao|default_if_none:'' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Valor Aquisição (R$)</label>
                    <input type="number" name="valor_aquisicao" class="form-control" step="0.01" value="{{ touro.valor_aquisicao|default_if_none:'' }}">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Valor Aluguel Mensal (R$)</label>
                    <input type="number" name="valor_aluguel_mensal" class="form-control" step="0.01" value="{{ touro.valor_aluguel_mensal|default_if_none:'' }}">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Observações</label>
                    <textarea name="observacoes" class="form-control" rows="3">{{ touro.observacoes|default_if_none:'' }}</textarea>
                </div>
                <div class="col-12">
                    <label class="form-label">Observações da Avaliação Andrológica</label>
                    <textarea name="observacoes_avaliacao" class="form-control" rows="3">{{ touro.observacoes_avaliacao|default_if_none:'' }}</textarea>
                </div>
            </div>
        </div>
        <div class="card-footer d-flex justify-content-end gap-2">
            <a href="{% url 'touros_lista' propriedade.id %}" class="btn btn-outline-secondary">Cancelar</a>
            <button type="submit" class="btn btn-success">
                <i class="bi bi-save me-1"></i>{% if form_type == "novo" %}Salvar Touro{% else %}Atualizar Touro{% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}





