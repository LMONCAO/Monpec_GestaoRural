# Generated by Django 4.2.7 on 2025-11-05 13:37

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('gestao_rural', '0019_animalindividual_arquivokml_empreiteiro_equipamento_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='TouroSemen',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_touro', models.CharField(max_length=50, unique=True, verbose_name='Número do Touro')),
                ('nome_touro', models.CharField(max_length=200, verbose_name='Nome do Touro')),
                ('raca', models.CharField(max_length=50, verbose_name='Raça')),
                ('registro', models.CharField(blank=True, max_length=50, null=True, verbose_name='Registro Genealógico')),
                ('tipo_semen', models.CharField(choices=[('CONVENCIONAL', 'Convencional'), ('SEXADO', 'Sexado'), ('IVF', 'In Vitro Fertilization')], default='CONVENCIONAL', max_length=20, verbose_name='Tipo de Sêmen')),
                ('deposito_genetico', models.CharField(blank=True, max_length=100, null=True, verbose_name='Depósito Genético')),
                ('avaliacao_genetica', models.TextField(blank=True, null=True, verbose_name='Avaliação Genética')),
                ('preco_dose', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Preço por Dose (R$)')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
            ],
            options={
                'verbose_name': 'Touro para Sêmen',
                'verbose_name_plural': 'Touros para Sêmen',
                'ordering': ['nome_touro', 'numero_touro'],
            },
        ),
        migrations.AlterField(
            model_name='iatf',
            name='inseminador',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs_inseminadas', to=settings.AUTH_USER_MODEL, verbose_name='Inseminador'),
        ),
        migrations.CreateModel(
            name='ProtocoloIATF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=200, verbose_name='Nome do Protocolo')),
                ('tipo', models.CharField(choices=[('OVSYNCH', 'Ovsynch'), ('OVSYNCH_7', 'Ovsynch 7 dias'), ('CIDR', 'CIDR'), ('CIDR_Ovsynch', 'CIDR + Ovsynch'), ('DUPLO_Ovsynch', 'Duplo Ovsynch'), ('J_Synch', 'J-Synch'), ('PROESTRO', 'Proestro'), ('CUSTOMIZADO', 'Customizado')], max_length=30, verbose_name='Tipo de Protocolo')),
                ('descricao', models.TextField(blank=True, null=True, verbose_name='Descrição')),
                ('dia_gnrh', models.IntegerField(default=0, help_text='Dia inicial (dia 0)', verbose_name='Dia 0 - GnRH')),
                ('dia_cidr', models.IntegerField(blank=True, help_text='Dia de inserção do CIDR (se aplicável)', null=True, verbose_name='Dia 1 - CIDR')),
                ('dia_pgf2a', models.IntegerField(default=7, help_text='Dia de aplicação de PGF2α', verbose_name='Dia 7 - PGF2α')),
                ('dia_retirada_cidr', models.IntegerField(blank=True, help_text='Dia de retirada do CIDR (se aplicável)', null=True, verbose_name='Dia 7 - Retirada CIDR')),
                ('dia_gnrh_final', models.IntegerField(default=9, help_text='Dia da segunda aplicação de GnRH', verbose_name='Dia 9 - GnRH Final')),
                ('dia_iatf', models.IntegerField(default=10, help_text='Dia da inseminação', verbose_name='Dia 10 - IATF')),
                ('taxa_prenhez_esperada', models.DecimalField(decimal_places=2, default=50.0, max_digits=5, verbose_name='Taxa de Prenhez Esperada (%)')),
                ('custo_protocolo', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo Médio do Protocolo (R$)')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('propriedade', models.ForeignKey(blank=True, help_text='Protocolo específico da propriedade (ou global se null)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='protocolos_iatf', to='gestao_rural.propriedade', verbose_name='Propriedade')),
            ],
            options={
                'verbose_name': 'Protocolo IATF',
                'verbose_name_plural': 'Protocolos IATF',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='LoteSemen',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_lote', models.CharField(max_length=50, verbose_name='Número do Lote')),
                ('numero_doses', models.IntegerField(default=1, verbose_name='Número de Doses')),
                ('doses_utilizadas', models.IntegerField(default=0, verbose_name='Doses Utilizadas')),
                ('doses_disponiveis', models.IntegerField(default=0, help_text='Calculado automaticamente', verbose_name='Doses Disponíveis')),
                ('data_aquisicao', models.DateField(verbose_name='Data de Aquisição')),
                ('data_validade', models.DateField(blank=True, null=True, verbose_name='Data de Validade')),
                ('preco_unitario', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Preço Unitário (R$)')),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Valor Total (R$)')),
                ('localizacao', models.CharField(blank=True, help_text='Local de armazenamento (nitrogênio, etc.)', max_length=200, null=True, verbose_name='Localização')),
                ('temperatura_armazenamento', models.CharField(blank=True, help_text='Ex: -196°C (nitrogênio líquido)', max_length=50, null=True, verbose_name='Temperatura de Armazenamento')),
                ('status', models.CharField(choices=[('ESTOQUE', 'Em Estoque'), ('RESERVADO', 'Reservado'), ('USADO', 'Usado'), ('VENCIDO', 'Vencido'), ('DESCARTADO', 'Descartado')], default='ESTOQUE', max_length=20, verbose_name='Status')),
                ('fornecedor', models.CharField(blank=True, max_length=200, null=True, verbose_name='Fornecedor')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('propriedade', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lotes_semen', to='gestao_rural.propriedade', verbose_name='Propriedade')),
                ('touro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lotes', to='gestao_rural.tourosemen', verbose_name='Touro')),
            ],
            options={
                'verbose_name': 'Lote de Sêmen',
                'verbose_name_plural': 'Lotes de Sêmen',
                'ordering': ['-data_aquisicao', 'touro'],
                'unique_together': {('numero_lote', 'propriedade')},
            },
        ),
        migrations.CreateModel(
            name='LoteIATF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome_lote', models.CharField(max_length=200, verbose_name='Nome do Lote')),
                ('data_inicio', models.DateField(verbose_name='Data de Início do Protocolo')),
                ('data_iatf', models.DateField(blank=True, help_text='Calculado automaticamente baseado no protocolo', null=True, verbose_name='Data da IATF')),
                ('numero_animais', models.IntegerField(default=0, verbose_name='Número de Animais')),
                ('animais_inseminados', models.IntegerField(default=0, verbose_name='Animais Inseminados')),
                ('status', models.CharField(choices=[('PLANEJADO', 'Planejado'), ('EM_ANDAMENTO', 'Em Andamento'), ('CONCLUIDO', 'Concluído'), ('CANCELADO', 'Cancelado')], default='PLANEJADO', max_length=20, verbose_name='Status')),
                ('custo_medicamentos', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo de Medicamentos (R$)')),
                ('custo_semen', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo de Sêmen (R$)')),
                ('custo_mao_obra', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo de Mão de Obra (R$)')),
                ('custo_total', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Custo Total (R$)')),
                ('numero_prenhezes', models.IntegerField(default=0, verbose_name='Número de Prenhezes')),
                ('taxa_prenhez', models.DecimalField(blank=True, decimal_places=2, help_text='Calculado automaticamente', max_digits=5, null=True, verbose_name='Taxa de Prenhez (%)')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('data_criacao', models.DateTimeField(auto_now_add=True, verbose_name='Data de Criação')),
                ('estacao_monta', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lotes_iatf', to='gestao_rural.estacaomonta', verbose_name='Estação de Monta')),
                ('lote_semen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lotes_iatf', to='gestao_rural.lotesemen', verbose_name='Lote de Sêmen')),
                ('propriedade', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lotes_iatf', to='gestao_rural.propriedade', verbose_name='Propriedade')),
                ('protocolo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lotes_iatf', to='gestao_rural.protocoloiatf', verbose_name='Protocolo')),
                ('responsavel', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lotes_iatf_responsavel', to=settings.AUTH_USER_MODEL, verbose_name='Responsável')),
                ('touro_semen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lotes_iatf', to='gestao_rural.tourosemen', verbose_name='Touro (Sêmen)')),
            ],
            options={
                'verbose_name': 'Lote de IATF',
                'verbose_name_plural': 'Lotes de IATF',
                'ordering': ['-data_inicio', 'nome_lote'],
            },
        ),
        migrations.CreateModel(
            name='IATFIndividual',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_inicio_protocolo', models.DateField(verbose_name='Data de Início do Protocolo')),
                ('data_dia_0_gnrh', models.DateField(blank=True, null=True, verbose_name='Data Dia 0 - GnRH')),
                ('data_dia_7_pgf2a', models.DateField(blank=True, null=True, verbose_name='Data Dia 7 - PGF2α')),
                ('data_dia_9_gnrh', models.DateField(blank=True, null=True, verbose_name='Data Dia 9 - GnRH Final')),
                ('data_iatf', models.DateField(blank=True, null=True, verbose_name='Data da IATF')),
                ('data_iatf_realizada', models.DateField(blank=True, help_text='Data/hora exata da inseminação', null=True, verbose_name='Data da IATF Realizada')),
                ('hora_iatf', models.TimeField(blank=True, null=True, verbose_name='Hora da IATF')),
                ('numero_dose', models.CharField(blank=True, max_length=50, null=True, verbose_name='Número da Dose')),
                ('status', models.CharField(choices=[('PROGRAMADA', 'Programada'), ('PROTOCOLO_INICIADO', 'Protocolo Iniciado'), ('DIA_0_GNRH', 'Dia 0 - GnRH Aplicado'), ('DIA_7_PGF2A', 'Dia 7 - PGF2α Aplicado'), ('DIA_9_GNRH', 'Dia 9 - GnRH Aplicado'), ('REALIZADA', 'IATF Realizada'), ('CANCELADA', 'Cancelada'), ('FALHOU', 'Falhou')], default='PROGRAMADA', max_length=30, verbose_name='Status')),
                ('resultado', models.CharField(choices=[('PENDENTE', 'Pendente Diagnóstico'), ('PREMIDA', 'Prenhez Confirmada'), ('VAZIA', 'Vazia'), ('ABORTO', 'Aborto'), ('REPETICAO', 'Repetição de Cio')], default='PENDENTE', max_length=20, verbose_name='Resultado')),
                ('data_diagnostico', models.DateField(blank=True, null=True, verbose_name='Data do Diagnóstico')),
                ('dias_gestacao_diagnostico', models.IntegerField(blank=True, null=True, verbose_name='Dias de Gestação no Diagnóstico')),
                ('metodo_diagnostico', models.CharField(blank=True, help_text='Ex: Palpação Retal, Ultrassom, etc.', max_length=50, null=True, verbose_name='Método de Diagnóstico')),
                ('condicao_corporal', models.CharField(blank=True, help_text='Escala de 1 a 5', max_length=20, null=True, verbose_name='Condição Corporal (1-5)')),
                ('peso_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Peso (kg)')),
                ('dias_vazia', models.IntegerField(blank=True, help_text='Dias desde o último parto/nascimento', null=True, verbose_name='Dias Vazia')),
                ('custo_protocolo', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo do Protocolo (R$)')),
                ('custo_semen', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo do Sêmen (R$)')),
                ('custo_inseminacao', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo da Inseminação (R$)')),
                ('custo_total', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Custo Total (R$)')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('observacoes_protocolo', models.TextField(blank=True, null=True, verbose_name='Observações do Protocolo')),
                ('observacoes_diagnostico', models.TextField(blank=True, null=True, verbose_name='Observações do Diagnóstico')),
                ('data_registro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Registro')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Data de Atualização')),
                ('animal_individual', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='iatfs_individuais', to='gestao_rural.animalindividual', verbose_name='Animal')),
                ('diagnostico_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs_diagnosticadas', to=settings.AUTH_USER_MODEL, verbose_name='Diagnóstico por')),
                ('estacao_monta', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs_individuais', to='gestao_rural.estacaomonta', verbose_name='Estação de Monta')),
                ('inseminador', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs_individuais_realizadas', to=settings.AUTH_USER_MODEL, verbose_name='Inseminador')),
                ('lote_iatf', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs', to='gestao_rural.loteiatf', verbose_name='Lote de IATF')),
                ('lote_semen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs', to='gestao_rural.lotesemen', verbose_name='Lote de Sêmen Utilizado')),
                ('propriedade', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='iatfs_individuais', to='gestao_rural.propriedade', verbose_name='Propriedade')),
                ('protocolo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='iatfs', to='gestao_rural.protocoloiatf', verbose_name='Protocolo')),
                ('touro_semen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs', to='gestao_rural.tourosemen', verbose_name='Touro (Sêmen)')),
                ('veterinario', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='iatfs_individuais_veterinario', to=settings.AUTH_USER_MODEL, verbose_name='Veterinário Responsável')),
            ],
            options={
                'verbose_name': 'IATF Individual',
                'verbose_name_plural': 'IATFs Individuais',
                'ordering': ['-data_inicio_protocolo', 'animal_individual'],
            },
        ),
        migrations.CreateModel(
            name='CalendarioIATF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=200, verbose_name='Nome do Calendário')),
                ('data_inicio', models.DateField(verbose_name='Data de Início')),
                ('data_fim', models.DateField(verbose_name='Data de Término')),
                ('intervalo_entre_lotes', models.IntegerField(default=14, help_text='Dias entre cada lote de IATF', verbose_name='Intervalo entre Lotes (dias)')),
                ('numero_lotes_planejados', models.IntegerField(default=0, verbose_name='Número de Lotes Planejados')),
                ('numero_lotes_realizados', models.IntegerField(default=0, verbose_name='Número de Lotes Realizados')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('propriedade', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='calendarios_iatf', to='gestao_rural.propriedade', verbose_name='Propriedade')),
                ('protocolo_padrao', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='gestao_rural.protocoloiatf', verbose_name='Protocolo Padrão')),
            ],
            options={
                'verbose_name': 'Calendário IATF',
                'verbose_name_plural': 'Calendários IATF',
                'ordering': ['-data_inicio', 'propriedade'],
            },
        ),
        migrations.CreateModel(
            name='AplicacaoMedicamentoIATF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_medicamento', models.CharField(choices=[('GnRH', 'GnRH'), ('PGF2A', 'PGF2α'), ('CIDR', 'CIDR'), ('E2', 'Estradiol'), ('OUTROS', 'Outros')], max_length=20, verbose_name='Tipo de Medicamento')),
                ('nome_medicamento', models.CharField(max_length=200, verbose_name='Nome do Medicamento')),
                ('dosagem', models.CharField(blank=True, help_text='Ex: 2ml, 100mg', max_length=50, null=True, verbose_name='Dosagem')),
                ('data_aplicacao', models.DateField(verbose_name='Data de Aplicação')),
                ('hora_aplicacao', models.TimeField(blank=True, null=True, verbose_name='Hora de Aplicação')),
                ('dia_protocolo', models.IntegerField(help_text='Dia 0, 7, 9, etc.', verbose_name='Dia do Protocolo')),
                ('aplicado_corretamente', models.BooleanField(default=True, verbose_name='Aplicado Corretamente')),
                ('observacoes', models.TextField(blank=True, null=True, verbose_name='Observações')),
                ('aplicado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Aplicado por')),
                ('iatf', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='aplicacoes_medicamentos', to='gestao_rural.iatfindividual', verbose_name='IATF')),
            ],
            options={
                'verbose_name': 'Aplicação de Medicamento IATF',
                'verbose_name_plural': 'Aplicações de Medicamentos IATF',
                'ordering': ['iatf', 'dia_protocolo', 'data_aplicacao'],
            },
        ),
        migrations.AddIndex(
            model_name='iatfindividual',
            index=models.Index(fields=['animal_individual', 'data_iatf'], name='gestao_rura_animal__354e42_idx'),
        ),
        migrations.AddIndex(
            model_name='iatfindividual',
            index=models.Index(fields=['lote_iatf', 'status'], name='gestao_rura_lote_ia_fdae76_idx'),
        ),
        migrations.AddIndex(
            model_name='iatfindividual',
            index=models.Index(fields=['resultado', 'data_diagnostico'], name='gestao_rura_resulta_cf1060_idx'),
        ),
    ]
