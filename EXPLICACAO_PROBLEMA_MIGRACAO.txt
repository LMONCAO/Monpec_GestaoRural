========================================
POR QUE PRECISAMOS DE "MANOBRAS"?
========================================

PROBLEMA RAIZ:
A migração 0034_financeiro_reestruturado está tentando criar tabelas que já existem.

POR QUE ISSO ACONTECE?
1. A tabela "gestao_rural_contafinanceira" já foi criada anteriormente
   - Pode ter sido criada manualmente no banco
   - Ou por uma migração que não está registrada corretamente
   - Ou por uma migração posterior que foi aplicada antes

2. A migração 0034 não verifica se a tabela já existe antes de criar
   - Django assume que se a migração não está marcada como aplicada, a tabela não existe
   - Mas no banco, a tabela JÁ existe
   - Resultado: erro DuplicateTable

========================================
SOLUÇÃO CORRETA (LONGO PRAZO)
========================================

OPÇÃO 1: Corrigir a migração 0034
- Modificar para verificar se tabelas existem antes de criar
- Usar RunPython para verificação condicional
- Mais trabalhoso, mas é a solução "limpa"

OPÇÃO 2: Criar uma migração de correção
- Criar migração 0034.1 que verifica e corrige
- Mais seguro, não mexe na migração original

OPÇÃO 3: Marcar migração como aplicada manualmente
- Se a tabela já existe, marcar a migração como aplicada
- É o que estamos fazendo com --fake
- Funciona, mas é uma "manobra"

========================================
POR QUE USAMOS "MANOBRAS" AGORA?
========================================

1. RAPIDEZ: Precisamos resolver rápido para o sistema funcionar
2. SEGURANÇA: Não queremos mexer em migrações antigas que podem quebrar outras coisas
3. FUNCIONALIDADE: O --fake funciona perfeitamente para este caso
4. PRÁTICO: É uma solução aceita pelo Django para casos como este

========================================
SOLUÇÃO DEFINITIVA (PARA FAZER DEPOIS)
========================================

1. Verificar no banco quais tabelas realmente existem
2. Verificar quais migrações estão marcadas como aplicadas
3. Criar uma migração de sincronização que:
   - Verifica estado atual do banco
   - Marca migrações como aplicadas se tabelas existem
   - Cria tabelas faltantes se necessário

Mas isso pode esperar - o sistema precisa funcionar AGORA!

========================================
CONCLUSÃO
========================================

As "manobras" são necessárias porque:
- O banco está em um estado inconsistente (tabelas existem mas migração não está marcada)
- Corrigir isso "corretamente" levaria mais tempo
- A solução com --fake é válida e aceita pelo Django
- Depois podemos fazer uma limpeza mais profunda se necessário

É como um "remendo temporário" que funciona bem!

========================================






