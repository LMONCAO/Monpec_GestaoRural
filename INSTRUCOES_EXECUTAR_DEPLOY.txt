================================================================================
üöÄ COMO EXECUTAR O DEPLOY AUTOM√ÅTICO
================================================================================

Como h√° caracteres especiais no caminho, siga estes passos:

================================================================================
OP√á√ÉO 1 - EXECUTAR MANUALMENTE (RECOMENDADO):
================================================================================

1. Abra o PowerShell como Administrador

2. Navegue at√© a pasta do projeto usando aspas:
   
   cd "C:\Users\lmonc\Desktop\MonPO-Monitor de Plano Or√ßamentario\Monpec_GestaoRural"

3. Execute o script:
   
   .\DEPLOY_GOOGLE_CLOUD_COMPLETO_AUTOMATICO.ps1

4. Aguarde o deploy (5-10 minutos)

================================================================================
OP√á√ÉO 2 - USAR O ARQUIVO .BAT:
================================================================================

1. D√™ duplo clique em: EXECUTAR_DEPLOY_GOOGLE_CLOUD.bat

2. Aguarde o deploy

================================================================================
OP√á√ÉO 3 - EXECUTAR PASSO A PASSO:
================================================================================

Abra PowerShell e execute cada comando:

# 1. Navegar para a pasta
cd "C:\Users\lmonc\Desktop\MonPO-Monitor de Plano Or√ßamentario\Monpec_GestaoRural"

# 2. Coletar arquivos est√°ticos
python manage.py collectstatic --noinput

# 3. Fazer build e deploy
gcloud builds submit --tag gcr.io/monpec-sistema-rural/monpec --timeout=20m

# 4. Deploy no Cloud Run
gcloud run deploy monpec `
    --image gcr.io/monpec-sistema-rural/monpec `
    --platform managed `
    --region us-central1 `
    --allow-unauthenticated `
    --set-env-vars "DJANGO_SETTINGS_MODULE=sistema_rural.settings_gcp,DEBUG=False" `
    --memory=1Gi `
    --cpu=2 `
    --timeout=300

# 5. Criar usu√°rio admin (ap√≥s deploy)
gcloud run jobs create monpec-admin-setup `
    --image gcr.io/monpec-sistema-rural/monpec `
    --region us-central1 `
    --set-env-vars "DJANGO_SETTINGS_MODULE=sistema_rural.settings_gcp,DEBUG=False" `
    --command python `
    --args criar_admin_fix.py

gcloud run jobs execute monpec-admin-setup --region us-central1 --wait

================================================================================
‚úÖ VERIFICA√á√ïES ANTES DE EXECUTAR:
================================================================================

1. ‚úÖ gcloud CLI instalado
   ‚Üí Verificar: gcloud --version

2. ‚úÖ Autenticado no Google Cloud
   ‚Üí Verificar: gcloud auth list
   ‚Üí Se n√£o estiver: gcloud auth login

3. ‚úÖ Projeto configurado
   ‚Üí Verificar: gcloud config get-value project
   ‚Üí Se n√£o estiver: gcloud config set project monpec-sistema-rural

4. ‚úÖ Billing habilitado
   ‚Üí Verificar no console: https://console.cloud.google.com/billing

================================================================================
üìù O QUE ACONTECE DURANTE O DEPLOY:
================================================================================

1. Coleta arquivos est√°ticos (collectstatic)
2. Cria Dockerfile se n√£o existir
3. Faz build da imagem Docker (5-10 minutos)
4. Faz deploy no Cloud Run (2-3 minutos)
5. Cria usu√°rio admin automaticamente
6. Mostra URL do servi√ßo

================================================================================
üîê CREDENCIAIS DO ADMIN:
================================================================================

Usu√°rio: admin
Senha: L6171r12@@
Email: admin@monpec.com.br

================================================================================
üìû SE DER ERRO:
================================================================================

1. Verificar se est√° na pasta correta:
   Test-Path manage.py

2. Verificar autentica√ß√£o:
   gcloud auth list

3. Verificar projeto:
   gcloud config get-value project

4. Ver logs do build:
   gcloud builds list --limit=5

5. Ver logs do Cloud Run:
   gcloud run services logs read monpec --region us-central1

================================================================================



