{% extends 'base_navegacao_inteligente.html' %}

{% block title %}Módulos - {{ propriedade.nome_propriedade }} - Monpec Rural{% endblock %}

{% block breadcrumb_extra %}
<li class="breadcrumb-item"><a href="{% url 'propriedades_lista' propriedade.produtor_id %}">Propriedades</a></li>
<li class="breadcrumb-item active">{{ propriedade.nome_propriedade }}</li>
{% endblock %}

{% block content %}
<div class="container-fluid mt-n3 mt-lg-n4">
    <!-- Cabeçalho -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card card-modulo card-primary">
                <div class="card-header-colorido card-header">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h3 class="mb-0" style="font-family: 'Poppins', 'Inter', sans-serif; font-weight: 700; letter-spacing: -0.02em;">
                                <i class="bi bi-layers-fill"></i> Módulos de Gestão
                            </h3>
                            <p class="mb-0 mt-2" style="font-family: 'Poppins', 'Inter', sans-serif; font-weight: 500;">
                                <i class="bi bi-geo-alt-fill"></i> <strong>{{ propriedade.nome_propriedade }}</strong> • 
                                {{ propriedade.municipio }}, {{ propriedade.estado }}
                            </p>
                        </div>
                        <div class="col-md-4 text-end">
                            <a href="{% url 'propriedades_lista' propriedade.produtor_id %}" class="btn btn-outline-light" style="font-family: 'Poppins', 'Inter', sans-serif; font-weight: 600; border-radius: 12px; padding: 0.65rem 1.25rem;">
                                <i class="bi bi-arrow-left-circle-fill"></i> Voltar às Propriedades
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Informações da Propriedade -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 16px; border: 2px solid #e2e8f0;">
                <div class="card-body" style="padding: 1.75rem;">
                    <div class="row g-4">
                        <div class="col-md-3">
                            <div style="font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; font-weight: 600;">
                                Área Total
                            </div>
                            <div style="font-weight: 700; color: #0f172a; font-size: 1.1rem; font-family: 'Poppins', 'Inter', sans-serif;">
                                {{ propriedade.area_total|default:"0,00" }} ha
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div style="font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; font-weight: 600;">
                                Tipo de Propriedade
                            </div>
                            <div style="font-weight: 700; color: #0f172a; font-size: 1.1rem; font-family: 'Poppins', 'Inter', sans-serif;">
                                {{ propriedade.tipo_propriedade|default:"N/A" }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div style="font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; font-weight: 600;">
                                Localização
                            </div>
                            <div style="font-weight: 700; color: #0f172a; font-size: 1.1rem; font-family: 'Poppins', 'Inter', sans-serif;">
                                {{ propriedade.municipio }}, {{ propriedade.estado }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div style="font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; font-weight: 600;">
                                Valor Total
                            </div>
                            <div class="destaque-valor" style="font-weight: 700; color: #16a34a; font-size: 1.1rem; font-family: 'Poppins', 'Inter', sans-serif;">
                                R$ {{ propriedade.valor_total|default:"0,00" }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Módulos Disponíveis -->
    <h2 style="font-family: 'Poppins', 'Inter', sans-serif; font-size: 1.75rem; font-weight: 700; color: var(--navy); margin-bottom: 1.5rem; letter-spacing: -0.02em;">
        Módulos Disponíveis
    </h2>

    <div class="cards-grid">
        <a href="{% url 'pecuaria_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                    <i class="bi bi-clipboard-data"></i>
                </div>
                <h3 class="card-title">Pecuária</h3>
                <p class="card-copy">
                    Planejamento, inventário, rastreabilidade, reprodução e inteligência do rebanho.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>


        <a href="{% url 'imobilizado_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                    <i class="bi bi-building-check"></i>
                </div>
                <h3 class="card-title">Bens e Patrimônio</h3>
                <p class="card-copy">
                    Cadastro de bens, depreciação, manutenção e relatórios patrimoniais.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        <a href="{% url 'financeiro_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                    <i class="bi bi-wallet2"></i>
                </div>
                <h3 class="card-title">Financeiro</h3>
                <p class="card-copy">
                    Fluxo de caixa, contas, custos, análises financeiras e capacidade de pagamento.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        {% if propriedade.tipo_operacao == 'PECUARIA' %}
        <a href="{% url 'pecuaria_planejamento_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);">
                    <i class="bi bi-calendar3-range"></i>
                </div>
                <h3 class="card-title">Planejamento</h3>
                <p class="card-copy">
                    Planejamento estratégico, projeções, indicadores financeiros e metas do rebanho.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>
        {% endif %}

        <a href="{% url 'operacoes_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                    <i class="bi bi-tools"></i>
                </div>
                <h3 class="card-title">Operações</h3>
                <p class="card-copy">
                    Gestão operacional: combustíveis, equipamentos, manutenções e equipe.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        <a href="{% url 'compras_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                    <i class="bi bi-bag-check"></i>
                </div>
                <h3 class="card-title">Compras</h3>
                <p class="card-copy">
                    Fornecedores, ordens de compra, notas fiscais e controle de insumos.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        <a href="{% url 'projetos_bancarios_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                    <i class="bi bi-file-earmark-medical"></i>
                </div>
                <h3 class="card-title">Projetos Bancários</h3>
                <p class="card-copy">
                    Projetos de crédito rural, SCR, contratos e análises para financiamento.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        <a href="{% url 'relatorios_dashboard' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
                    <i class="bi bi-graph-up-arrow"></i>
                </div>
                <h3 class="card-title">Relatórios</h3>
                <p class="card-copy">
                    Relatórios executivos de inventário, finanças, custos e consolidados para decisão.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>

        {% if propriedade.tipo_operacao == 'PECUARIA' %}
        <a href="{% url 'categorias_lista' %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);">
                    <i class="bi bi-tags-fill"></i>
                </div>
                <h3 class="card-title">Categorias</h3>
                <p class="card-copy">
                    Curadoria de categorias de animais, raças e faixas etárias padronizadas.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>
        {% endif %}

        <a href="{% url 'propriedade_editar' propriedade.id %}" class="modulo-card">
            <div class="card-clean">
                <div class="card-icon" style="background: linear-gradient(135deg, #64748b 0%, #475569 100%);">
                    <i class="bi bi-gear-wide-connected"></i>
                </div>
                <h3 class="card-title">Configurações</h3>
                <p class="card-copy">
                    Dados cadastrais e ajustes gerais da fazenda.
                </p>
                <span class="btn-navy">Entrar</span>
            </div>
        </a>
    </div>
</div>

<style>
/* Fontes Consistentes */
body, html {
    font-family: 'Poppins', 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif !important;
    font-weight: 500;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Poppins', 'Inter', sans-serif !important;
    font-weight: 700;
    letter-spacing: -0.02em;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.modulo-card {
    text-decoration: none;
    display: block;
}

.card-clean {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid #e2e8f0;
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.card-clean::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary), #8cb5ff);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.card-copy {
    color: #64748b;
    font-size: 0.9rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    font-weight: 400;
}

.card-clean:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 32px rgba(100, 149, 237, 0.2);
    border-color: var(--primary);
}

.card-clean:hover::before {
    opacity: 1;
}

.card-icon {
    width: 72px;
    height: 72px;
    background: linear-gradient(135deg, var(--primary) 0%, #4a7bc8 100%);
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.card-icon::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.card-clean:hover .card-icon {
    transform: scale(1.15) rotate(-5deg);
    box-shadow: 0 16px 32px rgba(0, 0, 0, 0.25);
}

.card-clean:hover .card-icon::before {
    opacity: 1;
}

.card-icon i {
    font-size: 32px;
    color: white;
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.card-title {
    font-family: 'Poppins', 'Inter', sans-serif !important;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
}

.btn-navy {
    background: linear-gradient(135deg, var(--navy) 0%, #4a7bc8 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1.5rem;
    font-size: 0.9rem;
    box-shadow: 0 4px 12px rgba(100, 149, 237, 0.25);
    font-family: 'Poppins', 'Inter', sans-serif;
    position: relative;
    padding-right: 2.5rem;
}

.btn-navy:hover {
    background: linear-gradient(135deg, #4a7bc8 0%, var(--navy) 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(100, 149, 237, 0.4);
    color: white;
}

.btn-navy::after {
    content: '→';
    position: absolute;
    right: 1.5rem;
    transition: transform 0.3s ease;
    font-weight: 600;
}

.btn-navy:hover::after {
    transform: translateX(4px);
}

.destaque-valor {
    font-size: 1.1rem;
    font-weight: 700;
    color: #16a34a;
    font-family: 'Poppins', 'Inter', sans-serif;
}

:root {
    --primary: #6495ed;
    --navy: #6495ed;
    --success: #28a745;
    --text-dark: #2c3e50;
    --text-light: #6c757d;
}
</style>
{% endblock %}

