<!-- Seção de Pesagem -->
<div class="col-lg-3 col-md-6">
  <div class="peso-display-v2">
    <div class="peso-display-v2-label">Registro de pesagem</div>
    <div class="peso-display-v2-input-wrapper">
      <input type="text" 
             id="pesoValorV2" 
             class="peso-display-v2-input" 
             placeholder="Identifique o animal primeiro"
             inputmode="decimal"
             pattern="[0-9,\.]+"
             disabled
             style="background-color: #f5f5f5; cursor: not-allowed;">
      <span class="peso-display-v2-unit-input">kg</span>
    </div>
    <div class="peso-display-v2-buttons">
      <button type="button" class="btn btn-gravar" id="pesoGravarBtnV2" onclick="if(typeof window.gravarPesagemDireto==='function'){window.gravarPesagemDireto();}else{alert('Erro: Função não disponível. Recarregue a página.');}" disabled style="opacity: 0.5; cursor: not-allowed;">
        <i class="fas fa-save"></i> Gravar
      </button>
      <button type="button" class="btn btn-limpar" id="pesoLimparBtnV2" onclick="var p=document.getElementById('pesoValorV2');if(p){p.value='';p.focus();}">
        <i class="fas fa-eraser"></i> Limpar
      </button>
      <button type="button" class="btn btn-finalizar" id="btnFinalizarGravarV2" onclick="if(typeof window.finalizarEGravarManejos==='function'){window.finalizarEGravarManejos();}else{alert('Erro: Função não disponível. Recarregue a página.');}" disabled style="opacity: 0.5; cursor: not-allowed; background: linear-gradient(135deg, #4caf50 0%, #45a049 100%); border: none; color: white; font-weight: 600;">
        <i class="fas fa-check-double"></i> Finalizar e Gravar
      </button>
    </div>
    <div class="peso-display-v2-info">
      <div class="peso-info-item">
        <span class="peso-info-label">Peso Registrado:</span>
        <span class="peso-info-value" id="pesoRegistradoV2" style="color: #4caf50; font-weight: 600;">—</span>
        <button type="button" 
                id="btnEditarPesagemV2" 
                class="btn-editar-pesagem" 
                style="display: none; margin-left: 8px; padding: 2px 8px; font-size: 0.7rem; background: #ff9800; color: white; border: none; border-radius: 4px; cursor: pointer;"
                title="Editar última pesagem"
                onclick="abrirModalEditarPesagem()">
          <i class="fas fa-edit"></i> Editar
        </button>
      </div>
      <div class="peso-info-item">
        <span class="peso-info-label">Último peso:</span>
        <span class="peso-info-value" id="pesoUltimoValorV2">—</span>
      </div>
      <div class="peso-info-item">
        <span class="peso-info-label">Data última pesagem:</span>
        <span class="peso-info-value" id="pesoUltimoDataV2">—</span>
      </div>
      <div class="peso-info-item">
        <span class="peso-info-label">Dias desde a última:</span>
        <span class="peso-info-value" id="pesoDiasV2">—</span>
      </div>
      <div class="peso-info-item">
        <span class="peso-info-label">Ganho total:</span>
        <span class="peso-info-value" id="pesoGanhoTotalV2">—</span>
      </div>
      <div class="peso-info-item">
        <span class="peso-info-label">Ganho diário médio:</span>
        <span class="peso-info-value" id="pesoGanhoDiaV2">—</span>
      </div>
      <!-- Gráfico de Evolução das Últimas 3 Pesagens -->
      <div class="peso-info-graph-container" id="pesoGraficoContainerV2" style="display: none; padding: 10px; background: var(--monpec-bg); border-top: 1px solid var(--monpec-border); border-radius: 0 0 6px 6px; min-height: 200px;">
        <div style="font-size: 0.75rem; font-weight: 600; color: var(--monpec-text-light); margin-bottom: 8px; text-align: center;">
          Evolução das Últimas 3 Pesagens
        </div>
        <canvas id="pesoGraficoEvolucaoV2" style="max-height: 150px; width: 100% !important; height: 150px !important;"></canvas>
      </div>
    </div>
  </div>
</div>
