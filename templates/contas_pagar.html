{% extends "base_navegacao.html" %}

{% block title %}Contas a Pagar - Sistema Monpec{% endblock %}

{% block breadcrumbs %}
<li><a href="{% url 'dashboard' %}">Início</a></li>
<li class="breadcrumb-separator">›</li>
<li><a href="{% url 'propriedades_lista' propriedade.produtor_id %}">Propriedades</a></li>
<li class="breadcrumb-separator">›</li>
<li><a href="{% url 'financeiro_dashboard' propriedade.id %}">Financeiro</a></li>
<li class="breadcrumb-separator">›</li>
<li class="active">Contas a Pagar</li>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <div class="d-flex justify-content-between align-items-start">
        <div>
            <h1 class="page-title">Contas a Pagar</h1>
            <p class="page-subtitle">{{ propriedade.nome }} - Gestão de despesas e vencimentos</p>
        </div>
        <div class="d-flex gap-2">
            <a href="{% url 'financeiro_dashboard' propriedade.id %}" class="btn-outline">Voltar</a>
            <button class="btn-navy">Nova Despesa</button>
        </div>
    </div>
</div>

<!-- Resumo -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card-clean text-center">
            <div class="card-valor-destaque">R$ {{ total_pagar|default:"0,00" }}</div>
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.05em;">
                Total a Pagar
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card-clean text-center">
            <div class="card-valor-destaque" style="color: #dc3545;">R$ {{ vencidas|default:"0,00" }}</div>
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.05em;">
                Vencidas
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card-clean text-center">
            <div class="card-valor-destaque" style="color: #ffc107;">R$ {{ a_vencer|default:"0,00" }}</div>
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.05em;">
                A Vencer (30 dias)
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card-clean text-center">
            <div class="card-valor-destaque" style="color: #28a745;">R$ {{ pagas|default:"0,00" }}</div>
            <div style="font-size: 12px; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.05em;">
                Pagas no Mês
            </div>
        </div>
    </div>
</div>

<!-- Tabela de Contas -->
<div class="table-clean">
    <table class="table mb-0">
        <thead>
            <tr>
                <th>Vencimento</th>
                <th>Descrição</th>
                <th>Categoria</th>
                <th>Fornecedor</th>
                <th>Status</th>
                <th class="text-end">Valor</th>
                <th class="text-end">Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for conta in contas %}
            <tr>
                <td>{{ conta.vencimento|date:"d/m/Y" }}</td>
                <td><strong>{{ conta.descricao }}</strong></td>
                <td>{{ conta.categoria }}</td>
                <td>{{ conta.fornecedor|default:"—" }}</td>
                <td>
                    {% if conta.pago %}
                    <span class="badge-custom" style="background: #28a745; color: white;">Pago</span>
                    {% elif conta.vencido %}
                    <span class="badge-custom" style="background: #dc3545; color: white;">Vencido</span>
                    {% else %}
                    <span class="badge-custom badge-gray">A Vencer</span>
                    {% endif %}
                </td>
                <td class="text-end destaque-valor">R$ {{ conta.valor }}</td>
                <td class="text-end">
                    <button class="btn-outline" style="padding: 0.35rem 0.75rem; font-size: 12px; margin-right: 0.25rem;">Pagar</button>
                    <button class="btn-outline" style="padding: 0.35rem 0.75rem; font-size: 12px;">Editar</button>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center" style="padding: 3rem;">
                    <div class="card-empty" style="border: none;">
                        <h4 style="color: var(--text-light); font-weight: 400;">Nenhuma conta a pagar</h4>
                        <p style="color: var(--text-light); margin-bottom: 2rem;">Adicione despesas futuras para controle</p>
                        <button class="btn-navy">Adicionar Primeira Despesa</button>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

