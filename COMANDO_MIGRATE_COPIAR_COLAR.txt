COMANDOS PARA COPIAR E COLAR NO CLOUD SHELL
===========================================

âš ï¸ ANTES DE COMEÃ‡AR: Se vocÃª receber erro de autenticaÃ§Ã£o, configure o projeto:

gcloud config set project monpec-sistema-rural

(No Cloud Shell vocÃª jÃ¡ estÃ¡ autenticado automaticamente, sÃ³ precisa configurar o projeto!)

===========================================
IMPORTANTE: Execute em DUAS etapas separadas!
===========================================


===========================================
ETAPA 1: Criar o arquivo de configuraÃ§Ã£o
===========================================

Copie e cole este comando (pressione Enter apÃ³s colar):

cat > /tmp/cloudbuild-migrate.yaml <<'YAML'
steps:
- name: 'gcr.io/monpec-sistema-rural/sistema-rural:latest'
  entrypoint: 'sh'
  args:
  - '-c'
  - |
    python manage.py migrate --noinput && \
    python manage.py collectstatic --noinput && \
    python manage.py shell -c "from django.contrib.auth.models import User; User.objects.filter(username='admin').delete(); User.objects.create_superuser('admin', 'admin@example.com', 'L6171r12@@')"
  env:
  - 'DJANGO_SETTINGS_MODULE=sistema_rural.settings_gcp'
  - 'DB_NAME=monpec_db'
  - 'DB_USER=monpec_user'
  - 'DB_PASSWORD=L6171r12@@jjms'
  - 'CLOUD_SQL_CONNECTION_NAME=monpec-sistema-rural:us-central1:monpec-db'
YAML


===========================================
ETAPA 2: Executar o build
===========================================

Aguarde a ETAPA 1 terminar (vocÃª verÃ¡ o prompt $ novamente), depois copie e cole este comando COMPLETO:

gcloud builds submit --config=/tmp/cloudbuild-migrate.yaml .


ðŸ’¡ MÃ‰TODO MAIS FÃCIL: Se vocÃª fez upload do arquivo executar_migrate_simples.sh, use:

bash executar_migrate_simples.sh

(Isso executa tudo automaticamente!)


===========================================
INSTRUÃ‡Ã•ES DETALHADAS:
===========================================

1. Copie TODO o comando da ETAPA 1 (desde "cat >" atÃ© "YAML")
2. Cole no Cloud Shell (botÃ£o direito > Colar)
3. Pressione Enter
4. AGUARDE o prompt $ aparecer novamente (indicando que terminou)
5. Copie o comando da ETAPA 2 ("gcloud builds submit...")
6. Cole no Cloud Shell
7. Pressione Enter
8. Aguarde 3-5 minutos

