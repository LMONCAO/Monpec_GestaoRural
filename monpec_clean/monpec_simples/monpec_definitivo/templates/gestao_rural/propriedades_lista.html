{% extends 'gestao_rural/base.html' %}

{% block title %}Propriedades - Monpec Projetista{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Propriedades</h1>
    <p>Gerencie todas as propriedades rurais cadastradas</p>
</div>

<div class="card">
    <h2 style="margin-bottom: 1rem;">Ações</h2>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{% url 'dashboard' %}" class="btn btn-secondary">Voltar ao Dashboard</a>
        <a href="{% url 'proprietarios_lista' %}" class="btn btn-primary">Ver Proprietários</a>
    </div>
</div>

<div class="card">
    <h3 style="margin-bottom: 1rem;">Buscar Propriedades</h3>
    <form method="get">
        <div style="display: flex; gap: 1rem; align-items: end;">
            <input type="text" name="search" placeholder="Nome da propriedade, proprietário ou município..." style="flex: 1; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;" value="{{ search }}">
            <button type="submit" class="btn btn-primary">Buscar</button>
        </div>
    </form>
</div>

{% if propriedades %}
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
        {% for propriedade in propriedades %}
        <div class="card">
            <div style="border-bottom: 1px solid #e9ecef; padding-bottom: 1rem; margin-bottom: 1rem;">
                <h3 style="color: #333; margin-bottom: 0.5rem;">{{ propriedade.nome }}</h3>
                <p style="color: #666; font-size: 0.9rem;">Proprietário: {{ propriedade.proprietario.nome }}</p>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span style="color: #666; font-weight: 500;">Área:</span>
                    <span style="color: #333;">{{ propriedade.area }} hectares</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span style="color: #666; font-weight: 500;">Município:</span>
                    <span style="color: #333;">{{ propriedade.municipio }}, {{ propriedade.estado }}</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span style="color: #666; font-weight: 500;">Itens:</span>
                    <span style="color: #333;">{{ propriedade.total_itens }}</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span style="color: #666; font-weight: 500;">Valor Total:</span>
                    <span style="color: #333;">R$ {{ propriedade.valor_total|default:"0,00" }}</span>
                </div>
            </div>
            
            <div style="display: flex; gap: 0.5rem;">
                <a href="{% url 'propriedade_modulos' propriedade.id %}" class="btn btn-primary" style="flex: 1; text-align: center;">Ver Módulos</a>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card" style="text-align: center; padding: 3rem;">
        <h3 style="color: #999; margin-bottom: 1rem;">Nenhuma propriedade encontrada</h3>
        <p style="color: #666; margin-bottom: 1rem;">Comece cadastrando proprietários e suas propriedades</p>
        <a href="{% url 'proprietarios_lista' %}" class="btn btn-primary">Ver Proprietários</a>
    </div>
{% endif %}
{% endblock %}
