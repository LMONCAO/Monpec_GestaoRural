üöÄ GUIA MONPEC - DESENVOLVIMENTO PARA PRODU√á√ÉO

üìã PR√ÅTICAS IMPLEMENTADAS
- PostgreSQL Local (igual produ√ß√£o)
- Deploys Frequentes
- Testes em Produ√ß√£o
- Migra√ß√µes Limpas

üõ†Ô∏è CONFIGURA√á√ÉO INICIAL

Instalar PostgreSQL Local:
sudo apt update
sudo apt install postgresql postgresql-contrib

Criar usu√°rio e banco:
sudo -u postgres psql
CREATE USER monpec_user WITH PASSWORD 'sua_senha_local';
CREATE DATABASE monpec_db OWNER monpec_user;
GRANT ALL PRIVILEGES ON DATABASE monpec_db TO monpec_user;
\q

Configurar settings.py para desenvolvimento:
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'monpec_db',
        'USER': 'monpec_user',
        'PASSWORD': 'sua_senha_local',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}

üîÑ WORKFLOW DE DESENVOLVIMENTO

1. Sempre que modificar models:
python manage.py makemigrations
python manage.py migrate
python manage.py runserver

2. Deploy Frequente (ap√≥s cada feature):
gcloud builds submit --tag gcr.io/monpec-sistema-rural/monpec
gcloud run deploy monpec --image gcr.io/monpec-sistema-rural/monpec --platform managed --region us-central1 --set-env-vars="..." --allow-unauthenticated

3. Verificar se funcionou:
curl -I https://monpec-29862706245.us-central1.run.app/
curl https://monpec-29862706245.us-central1.run.app/ | head -10

‚úÖ VERIFICA√á√ïES PR√â-DEPLOY

Antes de cada deploy:
python manage.py migrate --dry-run
python manage.py collectstatic --noinput
python manage.py runserver

üö® PROBLEMAS COMUNS E SOLU√á√ïES

Migra√ß√µes Inconsistentes:
python manage.py migrate --fake-initial

Dados Corrompidos:
python manage.py reset_db
python manage.py migrate
python manage.py populate_dados

Deploy Falhando:
gcloud run services logs read monpec --region=us-central1
gcloud container images list --repository=gcr.io/monpec-sistema-rural

üìä MONITORAMENTO

Ap√≥s deploy, verificar:
1. Landing page carrega
2. Login funciona
3. Dashboard acess√≠vel
4. Logs sem erros
5. Performance OK

üéØ METAS PARA O FUTURO
- PostgreSQL local configurado
- Primeiro deploy funcionando
- Pipeline de deploy autom√°tico
- Testes automatizados
- Monitoramento ativo

üöÄ PR√ìXIMOS PASSOS
1. Configurar PostgreSQL local
2. Testar aplica√ß√£o com PostgreSQL
3. Fazer primeiro deploy limpo
4. Estabelecer rotina de deploy frequente